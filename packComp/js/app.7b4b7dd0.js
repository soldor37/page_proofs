(function(e){function t(t){for(var n,s,l=t[0],r=t[1],c=t[2],u=0,m=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var r=a[l];0!==o[r]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},o={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/packComp/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=r;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"088b":function(e,t,a){"use strict";var n=a("dde7"),o=a.n(n);o.a},1121:function(e,t,a){"use strict";var n=a("98c1"),o=a.n(n);o.a},"17cc":function(e,t,a){},"18a5":function(e,t,a){"use strict";var n=a("17cc"),o=a.n(n);o.a},"3b92":function(e,t,a){},4986:function(e,t,a){"use strict";var n=a("6b03"),o=a.n(n);o.a},5221:function(e,t,a){"use strict";var n=a("3b92"),o=a.n(n);o.a},"56d7":function(e,t,a){"use strict";a.r(t);a("45fc"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[e.isLoggedIn?a("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{attrs:{link:"",to:"/"}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-list-item-title",{staticClass:"font-weight-medium subtitle-1"},[e._v("Comparisone")])],1),1!=e.is_admin?a("v-list-item",{attrs:{link:"",to:"/packages"}},[a("v-list-item-action",[a("v-icon",[e._v("mdi-package-variant")])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"font-weight-medium subtitle-1"},[e._v("Packages")])],1)],1):e._e(),1==e.is_admin?a("v-list-group",{attrs:{"sub-group":"","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[e._v("Database")])],1)]},proxy:!0}],null,!1,3699038733)},[a("v-list-item",{attrs:{to:"/admin/package"}},[a("v-list-item-title",{staticClass:"mx-auto"},[e._v("Packages")])],1),a("v-list-item",{attrs:{to:"/admin/material"}},[a("v-list-item-title",[e._v("Materials")])],1),a("v-list-item",{attrs:{to:"/admin/groups"}},[a("v-list-item-title",[e._v("Package groups")])],1),a("v-list-item",{attrs:{to:"/admin/criteria"}},[a("v-list-item-title",[e._v("Criteria")])],1),a("v-list-item",{attrs:{to:"/admin/users"}},[a("v-list-item-title",[e._v("Users")])],1)],1):e._e()],1)],1):e._e(),a("v-app-bar",{attrs:{app:"",color:"indigo",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",{staticClass:"caption"},[e._v("Software complex for selecting packaging materials by environmental parameters")]),a("v-spacer"),e.isLoggedIn?e._e():a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",to:"/login"}},[e._v(" Login "),a("v-icon",[e._v("mdi-login-variant")])],1),e.isLoggedIn?a("v-btn",{staticClass:"ma-2",attrs:{color:"primary"},on:{click:e.logout}},[e._v(" Logout "),a("v-icon",[e._v("mdi-logout")])],1):e._e()],1),a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{staticClass:"text-center"},[a("router-view")],1)],1)],1)],1),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[e._v("© 2020")])])],1)},i=[],s=(a("d3b7"),{data:function(){return{drawer:null,is_admin:null}},computed:{isLoggedIn:function(){return this.isAdmin(),this.$store.getters.isLoggedIn}},methods:{isAdmin:function(){this.is_admin=localStorage.is_admin},logout:function(){var e=this;this.$store.dispatch("logout").then((function(){e.$router.push("/login")}))}},created:function(){this.$http.interceptors.response.use(void 0,(function(e){return new Promise((function(){throw 401===e.status&&e.config&&!e.config.__isRetryRequest&&this.$store.dispatch("logout"),e}))}))}}),l=s,r=a("2877"),c=Object(r["a"])(l,o,i,!1,null,null,null),d=c.exports,u=(a("f9e3"),a("2dd8"),a("5f5b")),m=a("b1e0"),p=a("8c4f"),h=a("1321"),v=a.n(h),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"comparisone"}},[a("router-view"),a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{md:"3",sm:"12"}},[a("v-row",{staticClass:"pa-2"},[a("v-select",{attrs:{items:e.packGroups,"item-value":"packs","item-text":"name","menu-props":{maxHeight:"400"},label:"Select",outlined:"",hint:"Select an existing package group","persistent-hint":""},model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}})],1),a("v-row",{staticClass:"pa-2"},[a("v-select",{attrs:{items:e.selectedGroup,"item-value":"idpack","item-text":"pack_name","menu-props":{maxHeight:"400"},label:"Select",multiple:"",chips:"",outlined:"",hint:"Pick more than 1 package","persistent-hint":""},model:{value:e.selectedPack,callback:function(t){e.selectedPack=t},expression:"selectedPack"}})],1),a("v-row",{staticClass:"pa-2"},[a("v-subheader",{domProps:{textContent:e._s("Create a new package group")}}),a("v-btn",{attrs:{color:"light-blue lighten-4",block:""},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v("New comparisone")])],1),a("hr"),a("v-row",{staticClass:"pa-2"},[a("v-btn",{attrs:{color:"light-blue lighten-4",block:""},on:{click:function(t){return e.calc()}}},[e._v("Calculate")]),a("v-alert",{attrs:{value:e.alertForm,dense:"",type:"warning",transition:"scale-transition"}},[e._v(e._s(e.alertMessage))])],1)],1),a("v-col",{attrs:{md:"9",sm:"12"}},[a("v-card",[a("v-card-title",{staticClass:"text-center justify-center py-6"},[a("h1",{staticClass:"font-weight-bold title basil--text"},[e._v("Comparisone result")])]),a("v-tabs",{attrs:{"background-color":"transparent",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return a("v-tab",{key:t},[e._v(e._s(t))])})),1),a("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("apexchart",{attrs:{type:"bar",options:e.chart1.chartOptions,series:e.chart1.series}})],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("apexchart",{attrs:{type:"radar",options:e.chart2.chartOptions,series:e.chart1.series}})],1)],1),a("v-tab-item",[a("v-card",{attrs:{flat:""}},[a("v-simple-table",{staticClass:"table-bordered",attrs:{dense:!0,"fixed-header":!0},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Package name")]),a("th",{staticClass:"text-left"},[e._v("Materials, gram")]),a("th",{staticClass:"text-left"},[e._v("Relative values")]),a("th",{staticClass:"text-left"},[e._v("Total index")])])]),a("tbody",e._l(e.forTable,(function(t){return a("tr",{key:t.name},[a("td",{staticClass:"text-left"},[e._v(e._s(t.name))]),a("td",{staticClass:"text-left"},e._l(t.materials,(function(t){return a("tr",{key:t.name},[e._v(e._s(t.name)+": "+e._s(t.value))])})),0),a("td",{staticClass:"text-left"},e._l(t.ecols,(function(t){return a("tr",{key:t.name},[e._v(e._s(t.name)+": "+e._s(t.value)+", "+e._s(t.measure))])})),0),a("td",{staticClass:"text-left"},[e._v(e._s(t.totalIndex))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Select packages for new comparisone")])]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Comparisone name",hint:"You can fill this field later, if you decide to save comparisone","persistent-hint":""},model:{value:e.newGroup.groupName,callback:function(t){e.$set(e.newGroup,"groupName",t)},expression:"newGroup.groupName"}}),a("hr"),a("v-autocomplete",{attrs:{items:e.packages,"return-object":"","item-text":"pack_name",outlined:"",dense:"",label:"Packages",multiple:""},model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{absolute:!0,left:!0,color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"light-blue lighten-4",disabled:e.btnSaveSelection},on:{click:function(t){return e.saveGroup()}}},[e._v("Save group")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.createGroup}},[e._v("Save")])],1)],1)],1)],1)],1)],1)},g=[],x=(a("d81d"),a("bc3a")),k=a.n(x),_={name:"comparisone",data:function(){return{tab:null,tabs:["Bar chart","Radar chart","Table"],packages:[],selectedPack:[],packGroups:[],selectedGroup:void 0,btnSaveSelection:!1,newGroup:{groupName:"",packIDs:[]},dialog:!1,alertForm:!1,alertMessage:"",headers:[{text:"Package name",align:"start",sortable:!1,value:"name"},{text:"Materials"},{text:"Relative values"}],forTable:[],chart1:{series:[],chartOptions:{chart:{type:"bar",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},legend:{show:!0,formatter:function(e){return e},fontSize:"16px"},plotOptions:{bar:{dataLabels:{position:"center"},horizontal:!1,columnWidth:"80%"}},responsive:[{breakpoint:1e3,options:{chart:{height:"250",width:"100%"},plotOptions:{bar:{dataLabels:{position:"center"},horizontal:!1,columnWidth:"80%"}},legend:{show:!0,formatter:function(e){return e},fontSize:"8px"},dataLabels:{enabled:!1},yaxis:{max:1,min:0,tickAmount:2,decimalsInFloat:1,title:{text:"Relative values of environmental characteristics",style:{fontSize:"7px"}}},xaxis:{labels:{show:!0,rotate:-90,rotateAlways:!1,trim:!0,minHeight:void 0,maxHeight:120,style:{colors:[],fontSize:"6px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"},offsetX:0,offsetY:0}}}}],dataLabels:{enabled:!0,dropShadow:{enabled:!0,left:2,top:2,opacity:.5},style:{fontSize:"18px"}},stroke:{show:!0,width:4,colors:["transparent"]},xaxis:{categories:["Energy, MJ/kg","CO2, m^3/kg","Water, l/kg","Oil consumption, l/kg","Garbage, kg/kg","Water consumption, l/kg","Total index"]},yaxis:{max:1,min:0,tickAmount:6,decimalsInFloat:2,title:{text:"Relative values of environmental characteristics",style:{fontSize:"15px"}}},fill:{opacity:1}}},chart2:{chartOptions:{chart:{type:"radar",dropShadow:{enabled:!0,blur:1,left:1,top:1}},title:{text:"Relative values of environmental characteristics",align:"center",margin:10,offsetY:50,style:{fontSize:"15px"}},stroke:{width:2},fill:{opacity:.1},markers:{size:5},xaxis:{categories:["Energy, MJ","CO2, m^3","Water, l","Oil consumption, l","Garbage, kg","Water consumption, l","Total index"],labels:{style:{colors:[],fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"}}},yaxis:{max:1,min:0,tickAmount:8,decimalsInFloat:2,labels:{style:{fontSize:"15px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"}}},responsive:[{breakpoint:1e3,options:{chart:{height:"250",width:"100%"},title:{text:"Relative values of environmental characteristics",align:"center",margin:10,offsetY:10,style:{fontSize:"6px"}},markers:{size:1},xaxis:{labels:{style:{colors:[],fontSize:"6px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-xaxis-label"}}},yaxis:{min:0,tickAmount:2,decimalsInFloat:1,labels:{style:{fontSize:"6px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"}}}}}]}}}},watch:{selectedGroup:function(){this.selectedPack=[];var e=[];this.selectedGroup.map((function(t){e.push(t.idpack)})),this.newGroup.packIDs=e},dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getPackages(),this.getGroups()},getPackages:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts")).then((function(t){e.packages=t.data})).catch((function(e){alert(e+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(e)}))},getGroups:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/groups")).then((function(t){e.packGroups=t.data})).catch((function(e){alert(e+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(e)}))},calc:function(){var e=this;if(e.selectedPack.length>=2){e.alertForm=!1;var t=window.location.hostname,a=e.selectedPack;e.forTable=[],k.a.post("http://".concat(t,":3000/posts/calc"),{params:{ID:a}}).then((function(t){e.chart1.series=t.data[0],e.forTable=t.data[1],console.log(t.data[1])})).catch((function(e){console.log("-----error-------"),console.log(e)}))}else e.alertMessage="Pick more than 1 package for comparisone",e.alertForm=!0},saveGroup:function(){var e=this,t=this,a=window.location.hostname;this.dialog=!1,k.a.post("http://".concat(a,":3000/posts/newGroup"),t.newGroup).then((function(t){console.log(t),e.getData()})).catch((function(e){console.log("-----error-------"),console.log(e)}))},createGroup:function(){var e=[];this.selectedGroup.map((function(t){e.push(t.idpack)})),this.selectedPack=e,this.dialog=!1},close:function(){this.dialog=!1}}},b=_,w=Object(r["a"])(b,f,g,!1,null,null,null),I=w.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Authorization")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"Login",name:"login",type:"text"},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:e.submit}},[e._v("Login")])],1)],1)],1)],1)},C=[],D={data:function(){return{login:"",password:""}},methods:{submit:function(){var e=this,t=this.login,a=this.password;this.$store.dispatch("login",{login:t,password:a}).then((function(){return e.$router.push("/")})).catch((function(e){return console.log(e)}))}}},S=D,P=Object(r["a"])(S,y,C,!1,null,null,null),O=P.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.packfull,"sort-by":"ID","single-expand":e.singleExpand,expanded:e.expanded,search:e.search,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Packages")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("New item")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),-1==e.editedIndex?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Package name",rules:e.rulesName,hint:"At least 3 characters",counter:50,required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),a("v-autocomplete",{attrs:{items:e.material_for_select,outlined:"",dense:"",label:"Materials",multiple:"",required:""},model:{value:e.select_materials,callback:function(t){e.select_materials=t},expression:"select_materials"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_material,items:e.material_items_for_table,"sort-by":"ID","single-expand":e.singleExpand,expanded:e.expanded1,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded1=t}},scopedSlots:e._u([{key:"item.value",fn:function(t){return[a("v-edit-dialog",{attrs:{"return-value":t.item.value,large:"",persistent:""},on:{"update:returnValue":function(a){return e.$set(t.item,"value",a)},"update:return-value":function(a){return e.$set(t.item,"value",a)},save:e.saveInput,cancel:e.cancelInput,open:e.openInput,close:e.closeInput},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit","single-line":"",rules:e.rulesValue,counter:"",autofocus:"",required:"",hint:"Use 'dot' as decimal separator"},model:{value:t.item.value,callback:function(a){e.$set(t.item,"value",a)},expression:"props.item.value"}})]},proxy:!0}],null,!0)},[a("div",[e._v(e._s(t.value))])])]}},{key:"expanded-item",fn:function(t){t.kk;var n=t.item;return[a("v-list-item",[a("v-list-item-content",e._l(n.ecols[n.name],(function(t,n){return a("v-list-item-title",{key:n},[e._v(" "+e._s(n)+" : "+e._s(t)+" ")])})),1)],1)]}}],null,!1,953742660)})],1)],1)],1)],1):e._e(),e.editedIndex>=0?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-text-field",{attrs:{label:"Package name",rules:e.rulesName,hint:"At least 3 characters",counter:"",required:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),e._l(e.editedItem.materials,(function(t,n){return a("div",{key:n},[e.editedItem.materials[n].mass>0?[a("v-text-field",{attrs:{label:t.name+", (g)"},model:{value:e.editedItem.materials[n].mass,callback:function(t){e.$set(e.editedItem.materials[n],"mass",t)},expression:"editedItem.materials[mat_key].mass"}})]:e._e()],2)}))],2)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onInsert,e.onEdit)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{big:""},on:{click:function(t){return e.editItem(n)}}},[e._v("mdi-pencil-outline")]),a("v-icon",{attrs:{big:""},on:{click:function(t){return e.deleteItem(n,e.onDelete)}}},[e._v("mdi-delete-circle-outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getPackages}},[e._v("Reset")])]},proxy:!0},{key:"expanded-item",fn:function(t){t.headers;var n=t.item;return e._l(n.materials,(function(t,n){return a("v-list-item-title",{key:n,attrs:{"two-line":""}},[t.mass>0?[e._v(" "+e._s(t.name)+" : "+e._s(t.mass)+", (g) "),e._l(t.ecolcharacts,(function(t,n){return a("v-list-item-subtitle",{key:n},[e._v(e._s(t.name)+" : "+e._s(t.value)+", ("+e._s(t.measure)+")")])})),a("v-divider",{attrs:{inset:""}})]:e._e()],2)}))}}])})],1)},G=[],T=(a("4160"),a("c975"),a("a434"),a("b0c0"),a("159b"),{name:"adminpanel",data:function(){return{search:"",expanded:[],expanded1:[],snack:!1,snackColor:"",snackText:"",dialog:!1,singleExpand:!0,headers:[{text:"Package name",align:"left",sortable:!1,value:"name"},{text:"ID",value:"id"},{text:"Actions",value:"action",sortable:!1}],headers_material:[{text:"Material name",align:"left",sortable:!1,value:"name"},{text:"Weight, g",value:"value"}],editedIndex:-1,editedItem:{name:"",idpack:""},rulesName:[function(e){return!!e||"Required"},function(e){return e.length>=3||"Minimum 3 characters"},function(e){return e.length<=50||"Maximum 50 characters"}],rulesValue:[function(e){return!!e||"Required"},function(e){return e.length<=50||"Maximum 50 characters"}],defaultItem:{name:""},packages:[],materials:[],select_materials:[],weight:[],ecolchar:[],ecolvalue:[],ecoldict:[],packNames:[]}},computed:{ecol_pack_material:function(){var e=this,t={};return this.materials.forEach((function(a){t[a.material_name]={},e.ecolchar.forEach((function(e){a.idmaterials==e.fk_materials&&(t[a.material_name][e.ecol_name]=e.ecol_value)}))})),t},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},material_items_for_table:function(){var e=this,t=0;return this.select_materials.map((function(a){return e.materials.forEach((function(e){e.material_name==a&&(t=e.idmaterials)})),{name:a,value:0,ecols:e.ecol_pack_material,id:t}}))},material_for_select:function(){return this.materials.map((function(e){return e.material_name}))},packfull:function(){if(null==this.packages&&null==this.materials&&null==this.weight)return null;var e=this;return this.packages.map((function(t){return{id:t.idpack,name:t.pack_name,ecolvalue:e.ecolvalue,materials:e.materials.map((function(a){var n=[];e.ecolchar.forEach((function(e){if(e.fk_materials==a.idmaterials){var t={idecol:e.idecol,name:e.ecol_name,value:e.ecol_value,measure:e.ecol_measure};n.push(t)}}));var o=0;return e.weight.forEach((function(e){e.fk_packaging==t.idpack&&e.fk_materials==a.idmaterials&&(o=e.material_weight)})),{idmaterials:a.idmaterials,name:a.material_name,mass:o,ecolcharacts:n}}))}}))}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getPackages(),this.getMaterials(),this.getWeight(),this.getEcolchar(),this.getEcolvalue(),this.getEcolDict()},saveInput:function(){this.snack=!0,this.snackColor="success",this.snackText="Data saved"},cancelInput:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},openInput:function(){this.snack=!0,this.snackColor="info",this.snackText="Dialog opened"},closeInput:function(){console.log("Dialog closed")},editItem:function(e){this.editedIndex=this.packfull.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){var a=this.packfull.indexOf(e);1==confirm("Are you sure you want to delete this item?")&&(this.packages.splice(a,1),t(e))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e,t){var a=this;if(this.editedIndex>-1)Object.assign(a.packages[a.editedIndex],a.editedItem),t(a.editedItem),a.close();else{a.packages.push(this.editedItem);var n={name:this.editedItem.name,materials:this.material_items_for_table.map((function(e){return{name:e.name,value:e.value,id:e.id}}))};e(n),a.close()}},onInsert:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/insert"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onEdit:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/edit"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onDelete:function(e){var t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/delete"),e).then((function(e){console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getPackages:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts")).then((function(t){e.packages=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getMaterials:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBmaterials")).then((function(t){e.materials=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getWeight:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBweight")).then((function(t){e.weight=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getEcolchar:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBecolchar")).then((function(t){e.ecolchar=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getEcolvalue:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBecolvalue")).then((function(t){e.ecolvalue=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getEcolDict:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/ecol_dict")).then((function(t){e.ecoldict=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))}}}),$=T,A=(a("18a5"),Object(r["a"])($,E,G,!1,null,null,null)),F=A.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.packfull,search:e.search,"sort-by":"ID","single-expand":e.singleExpand,expanded:e.expanded,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Packages")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"900px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("New item")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),-1==e.editedIndex?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Package name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),a("v-autocomplete",{attrs:{items:e.material_for_select,outlined:"",dense:"",label:"Materials",multiple:""},model:{value:e.select_materials,callback:function(t){e.select_materials=t},expression:"select_materials"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers_material,items:e.material_items_for_table,"sort-by":"ID","item-key":"name"},scopedSlots:e._u([{key:"item.value",fn:function(t){return[a("v-edit-dialog",{attrs:{"return-value":t.item.value,large:"",persistent:""},on:{"update:returnValue":function(a){return e.$set(t.item,"value",a)},"update:return-value":function(a){return e.$set(t.item,"value",a)},save:e.saveInput,cancel:e.cancelInput,open:e.openInput,close:e.closeInput},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",autofocus:""},model:{value:t.item.value,callback:function(a){e.$set(t.item,"value",a)},expression:"props.item.value"}})]},proxy:!0}],null,!0)},[a("div",[e._v(e._s(t.value))])])]}}],null,!1,1792411955)})],1)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onInsert)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getPackages}},[e._v("Reset")])]},proxy:!0},{key:"expanded-item",fn:function(t){t.headers;var n=t.item;return[a("v-simple-table",{staticClass:"table-bordered",attrs:{dense:!0}},[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Material")]),a("th",{staticClass:"text-left"},[e._v("Value, g")])])]),a("tbody",e._l(n.materials,(function(t){return a("tr",{key:t.name},[t.mass>0?[a("td",{staticClass:"text-left"},[e._v(e._s(t.name))]),a("td",{staticClass:"text-left"},[e._v(e._s(t.mass))])]:e._e()],2)})),0)])]}}])})],1)},M=[],N={name:"adminpanel",data:function(){return{port:3e3,search:"",expanded:[],expanded1:[],snack:!1,snackColor:"",snackText:"",dialog:!1,singleExpand:!0,headers:[{text:"ID",value:"id"},{text:"Package name",align:"left",sortable:!1,value:"name"}],headers_material:[{text:"Material name",align:"left",sortable:!1,value:"name"},{text:"Weight, g",value:"value"}],editedIndex:-1,editedItem:{pack_name:"",idpack:""},defaultItem:{pack_name:""},packages:[],materials:[],select_materials:[],weight:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},material_items_for_table:function(){var e=this,t=0;return this.select_materials.map((function(a){return e.materials.forEach((function(e){e.material_name==a&&(t=e.idmaterials)})),{name:a,value:0,id:t}}))},material_for_select:function(){return this.materials.map((function(e){return e.material_name}))},packfull:function(){if(null==this.packages&&null==this.materials&&null==this.weight)return null;var e=this;return this.packages.map((function(t){return{id:t.idpack,name:t.pack_name,materials:e.materials.map((function(a){var n=[],o=0;return e.weight.forEach((function(e){e.fk_packaging==t.idpack&&e.fk_materials==a.idmaterials&&(o=e.material_weight)})),{idmaterials:a.idmaterials,name:a.material_name,mass:o,ecolcharacts:n}}))}}))}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getPackages(),this.getMaterials(),this.getWeight()},saveInput:function(){this.snack=!0,this.snackColor="success",this.snackText="Data saved"},cancelInput:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},openInput:function(){this.snack=!0,this.snackColor="info",this.snackText="Dialog opened"},closeInput:function(){console.log("Dialog closed")},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e){this.packages.push(this.editedItem);var t={name:this.editedItem.name,materials:this.material_items_for_table.map((function(e){return{name:e.name,value:e.value,id:e.id}}))};e(t),this.close()},onInsert:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/insert"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getPackages:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts")).then((function(t){console.log(t),e.packages=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getMaterials:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBmaterials")).then((function(t){console.log(t),e.materials=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getWeight:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBweight")).then((function(t){console.log(t),e.weight=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getEcolchar:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBecolchar")).then((function(t){console.log(t),e.ecolchar=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))}}},B=N,q=(a("4986"),Object(r["a"])(B,j,M,!1,null,null,null)),z=q.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.criteria,search:e.search,"sort-by":"idecol","item-key":"ecol_name"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Criteria")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e.editedIndex>=0?a("v-card-text",[a("v-container",[a("p",{staticClass:"font-weight-black title text-center"},[e._v(e._s(e.editedItem.ecol_name))]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-text-field",{attrs:{label:"Criteria value"},model:{value:e.editedItem.ecol_criteria,callback:function(t){e.$set(e.editedItem,"ecol_criteria",t)},expression:"editedItem.ecol_criteria"}})],1)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onEdit)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{big:""},on:{click:function(t){return e.editItem(n)}}},[e._v("mdi-pencil-outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getData}},[e._v("Reset")])]},proxy:!0}])})],1)},R=[],W={name:"adminpanel",data:function(){return{search:"",expanded:[],dialog:!1,singleExpand:!0,headers:[{text:"ID",value:"idecol"},{text:"Ecological characteristic",align:"left",sortable:!1,value:"ecol_name"},{text:"Criteria value",value:"ecol_criteria",sortable:!0},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{},criteria:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New material":"Edit criteria"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getCriteria()},editItem:function(e){this.editedIndex=this.criteria.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e){this.editedIndex>-1&&(Object.assign(this.criteria[this.editedIndex],this.editedItem),e(this.editedItem)),this.close()},onEdit:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/editCriteria"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getCriteria:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBcriteria")).then((function(t){console.log(t),e.criteria=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))}}},L=W,H=(a("680e"),Object(r["a"])(L,U,R,!1,null,null,null)),J=H.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.packfull,"sort-by":"ID","single-expand":e.singleExpand,expanded:e.expanded,search:e.search,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Materials")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("New material")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),-1==e.editedIndex?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Material name"},model:{value:e.editedItem.name_material,callback:function(t){e.$set(e.editedItem,"name_material",t)},expression:"editedItem.name_material"}}),e._l(e.ecoldict,(function(t,n){return a("div",{key:n},[a("v-text-field",{attrs:{label:t.ecol_name+", ("+t.ecol_measure+")"},model:{value:e.editedItem[t.ecol_name],callback:function(a){e.$set(e.editedItem,t.ecol_name,a)},expression:"editedItem[eco.ecol_name]"}})],1)}))],2)],1)],1)],1):e._e(),e.editedIndex>=0?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[a("v-text-field",{attrs:{label:"Material name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),e._l(e.editedItem.ecolcharacts,(function(t,n){return a("div",{key:n},[a("v-text-field",{attrs:{label:t.name+", ("+t.measure+")"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"eco.value"}})],1)}))],2)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onInsert,e.onEdit)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{big:""},on:{click:function(t){return e.editItem(n)}}},[e._v("mdi-pencil-outline")]),a("v-icon",{attrs:{big:""},on:{click:function(t){return e.deleteItem(n,e.onDelete)}}},[e._v("mdi-delete-circle-outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getData}},[e._v("Reset")])]},proxy:!0},{key:"expanded-item",fn:function(t){t.headers;var n=t.item;return[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",e._l(n.ecolcharacts,(function(t,n){return a("v-list-item-title",{key:n},[e._v(e._s(t.name)+" : "+e._s(t.value)+", ("+e._s(t.measure)+")")])})),1)],1)]}}])})],1)},Y=[],X={name:"adminpanel",data:function(){return{search:"",expanded:[],dialog:!1,singleExpand:!0,headers:[{text:"Material name",align:"left",sortable:!1,value:"name"},{text:"ID",value:"idmaterials"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{},materials:[],ecolchar:[],ecoldict:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New material":"Edit material"},packfull:function(){if(null==this.materials&&null==this.ecolchar)return null;var e=this;return e.materials.map((function(t){var a=[];return e.ecolchar.forEach((function(e){if(e.fk_materials==t.idmaterials){var n={idecol:e.idecol,name:e.ecol_name,value:e.ecol_value,measure:e.ecol_measure};a.push(n)}})),{idmaterials:t.idmaterials,name:t.material_name,ecolcharacts:a}}))}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getMaterials(),this.getEcolchar(),this.getEcolDict()},editItem:function(e){this.editedIndex=this.packfull.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){var a=this.packfull.indexOf(e);1==confirm("Are you sure you want to delete this item?")&&(this.materials.splice(a,1),t(e))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e,t){this.editedIndex>-1?(Object.assign(this.materials[this.editedIndex],this.editedItem),t(this.editedItem)):(this.materials.push(this.editedItem),e(this.editedItem)),this.close()},onInsert:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/insertMaterial"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onEdit:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/editMaterial"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onDelete:function(e){var t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/deleteMaterial"),e).then((function(e){console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getEcolchar:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBecolchar")).then((function(t){console.log(t),e.ecolchar=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getMaterials:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/DBmaterials")).then((function(t){console.log(t),e.materials=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))},getEcolDict:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/ecol_dict")).then((function(t){console.log(t),e.ecoldict=t.data})).catch((function(e){alert(e+"\n Failed connect to DB"),console.log("-----error-------"),console.log(e)}))}}},K=X,Q=(a("5221"),Object(r["a"])(K,V,Y,!1,null,null,null)),Z=Q.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.packGroups,"sort-by":"idgroup","single-expand":e.singleExpand,expanded:e.expanded,search:e.search,"item-key":"name","show-expand":""},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Groups")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("New group")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),-1==e.editedIndex?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Group name"},model:{value:e.newGroup.groupName,callback:function(t){e.$set(e.newGroup,"groupName",t)},expression:"newGroup.groupName"}}),a("hr"),a("v-autocomplete",{attrs:{items:e.packages,"item-text":"pack_name","item-value":"idpack",outlined:"",dense:"",label:"Packages",multiple:""},model:{value:e.newGroup.packIDs,callback:function(t){e.$set(e.newGroup,"packIDs",t)},expression:"newGroup.packIDs"}})],1)],1)],1)],1):e._e(),e.editedIndex>=0?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Group name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}}),a("hr"),a("v-autocomplete",{attrs:{items:e.packages,"item-text":"pack_name","item-value":"idpack",outlined:"",dense:"",label:"Packages",multiple:""},model:{value:e.editedItem.packs,callback:function(t){e.$set(e.editedItem,"packs",t)},expression:"editedItem.packs"}})],1)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onInsert,e.onEdit)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{big:""},on:{click:function(t){return e.deleteItem(n,e.onDelete)}}},[e._v("mdi-delete-circle-outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getData}},[e._v("Reset")])]},proxy:!0},{key:"expanded-item",fn:function(t){t.headers;var n=t.item;return[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",e._l(n.packs,(function(t,n){return a("v-list-item-title",{key:n},[e._v("ID: "+e._s(t.idpack)+", Name: "+e._s(t.pack_name))])})),1)],1)]}}])})],1)},te=[],ae={name:"adminpanel",data:function(){return{search:"",expanded:[],dialog:!1,singleExpand:!0,headers:[{text:"Group name",align:"left",sortable:!1,value:"name"},{text:"ID",value:"idgroup"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{},packGroups:[],newGroup:{groupName:"",packIDs:[]},packages:[],selectedGroup:void 0}},computed:{formTitle:function(){return-1===this.editedIndex?"New group":"Edit group"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getGroups(),this.getPackages()},editItem:function(e){this.editedIndex=this.packGroups.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){var a=this.packGroups.indexOf(e);1==confirm("Are you sure you want to delete this item?")&&(this.packGroups.splice(a,1),t(e))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e,t){this.editedIndex>-1?(Object.assign(this.packGroups[this.editedIndex],this.editedItem),t(this.editedItem)):(this.packGroups.push(this.editedItem),e(this.editedItem)),this.close()},onInsert:function(){var e=this,t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/newGroup"),this.newGroup).then((function(t){e.getData(),console.log(t)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onEdit:function(e){var t=this,a=window.location.hostname;k.a.post("http://".concat(a,":3000/posts/editGroup"),e).then((function(e){t.getData(),console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onDelete:function(e){var t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/deleteGroup"),e).then((function(e){console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getPackages:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts")).then((function(t){e.packages=t.data})).catch((function(e){alert(e+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(e)}))},getGroups:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/groups")).then((function(t){e.packGroups=t.data})).catch((function(e){alert(e+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(e)}))}}},ne=ae,oe=(a("088b"),Object(r["a"])(ne,ee,te,!1,null,null,null)),ie=oe.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,search:e.search,"sort-by":"id","item-key":"login"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Users")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("New user")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),-1==e.editedIndex?a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Login",rules:[e.rules.required]},model:{value:e.newUser.login,callback:function(t){e.$set(e.newUser,"login",t)},expression:"newUser.login"}}),a("v-text-field",{attrs:{label:"Password","append-icon":e.showPass?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.showPass?"text":"password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.showPass=!e.showPass}},model:{value:e.newUser.password,callback:function(t){e.$set(e.newUser,"password",t)},expression:"newUser.password"}}),a("v-checkbox",{attrs:{label:"Is admin: "+e.newUser.is_admin.toString(),"selected-color":"red"},model:{value:e.newUser.is_admin,callback:function(t){e.$set(e.newUser,"is_admin",t)},expression:"newUser.is_admin"}})],1)],1)],1)],1):e._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.save(e.onInsert)}}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{big:""},on:{click:function(t){return e.deleteItem(n,e.onDelete)}}},[e._v("mdi-delete-circle-outline")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.getData}},[e._v("Reset")])]},proxy:!0}])})],1)},le=[],re={name:"adminpanel",data:function(){return{search:"",dialog:!1,headers:[{text:"ID",value:"id"},{text:"User login",align:"left",value:"login"},{text:"Admin",value:"is_admin"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{},defaultItem:{},users:[],newUser:{login:"",password:"",is_admin:!1},showPass:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=8||"Minimum 8 characters"}}}},computed:{formTitle:function(){return-1===this.editedIndex?"New user":"Edit group"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.getData()},methods:{getData:function(){this.getUsers()},editItem:function(e){this.editedIndex=this.packGroups.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e,t){var a=this.users.indexOf(e);1==confirm("Are you sure you want to delete this item?")&&(this.users.splice(a,1),t(e))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(e){e(),this.close()},onInsert:function(){var e=this,t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/insertUser"),this.newUser).then((function(t){e.getData(),console.log(t)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},onDelete:function(e){var t=window.location.hostname;k.a.post("http://".concat(t,":3000/posts/deleteUser"),e).then((function(e){console.log(e)})).catch((function(e){alert(e+"\n Failed to POST on server"),console.log("-----error-------"),console.log(e)}))},getUsers:function(){var e=this,t=window.location.hostname;k.a.get("http://".concat(t,":3000/posts/usersAdmPanel")).then((function(t){e.users=t.data})).catch((function(e){alert(e+"\n Ошибка подключения к базе данных"),console.log("-----error-------"),console.log(e)}))},is_admin:function(e){return 1==e?"Yes":"No"}}},ce=re,de=(a("1121"),Object(r["a"])(ce,se,le,!1,null,null,null)),ue=de.exports,me=(a("99af"),a("2f62"));n["default"].use(me["a"]);var pe=new me["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t,a){e.status="success",e.token=t,e.user=a},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token=""}},actions:{login:function(e,t){var a=e.commit,n=window.location.hostname,o=3e3;return new Promise((function(e,i){a("auth_request"),k.a.post("http://".concat(n,":").concat(o,"/posts/login"),t).then((function(t){var n=t.data.token,o=t.data.user;localStorage.setItem("token",n),localStorage.setItem("is_admin",JSON.stringify(t.data.user.is_admin)),k.a.defaults.headers.common["Authorization"]=n,a("auth_success",n,o),e(t)})).catch((function(e){a("auth_error"),localStorage.removeItem("token"),i(e)}))}))},register:function(e,t){var a=e.commit,n=window.location.hostname;return new Promise((function(e,o){a("auth_request"),k()({url:"http://".concat(n,":3000/register"),data:t,method:"POST"}).then((function(t){var n=t.data.token,o=t.data.user;localStorage.setItem("token",n),k.a.defaults.headers.common["Authorization"]=n,a("auth_success",n,o),e(t)})).catch((function(e){a("auth_error",e),localStorage.removeItem("token"),o(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e){t("logout"),localStorage.removeItem("token"),delete k.a.defaults.headers.common["Authorization"],e()}))}},getters:{isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status}}}),he=a("ce5b"),ve=a.n(he);a("bf40"),a("5363");n["default"].use(ve.a);var fe={},ge=new ve.a(fe);n["default"].use(u["a"]),n["default"].use(m["a"]),n["default"].use(p["a"]),n["default"].component("apexchart",v.a),n["default"].prototype.$http=k.a;var xe=localStorage.getItem("token");xe&&(n["default"].prototype.$http.defaults.headers.common["Authorization"]=xe);var ke=[{path:"/admin/package",component:F,name:"packages",meta:{requiresAuth:!0,is_admin:!0}},{path:"/packages",component:z,name:"packagesNoAdmin",meta:{requiresAuth:!0,is_admin:!1}},{path:"/admin/material",component:Z,name:"materials",meta:{requiresAuth:!0,is_admin:!0}},{path:"/admin/groups",component:ie,name:"Groups",meta:{requiresAuth:!0,is_admin:!0}},{path:"/admin/criteria",component:J,name:"Criteria",meta:{requiresAuth:!0,is_admin:!0}},{path:"/admin/users",component:ue,name:"Users",meta:{requiresAuth:!0,is_admin:!0}},{path:"/",component:I,name:"comparisone",meta:{requiresAuth:!0}},{path:"/login",component:O},{path:"*",redirect:"/"}],_e=new p["a"]({routes:ke,mode:"history"});_e.beforeEach((function(e,t,a){var n=JSON.parse(localStorage.getItem("is_admin"));if(e.matched.some((function(e){return e.meta.is_admin})))1==n?a():alert("access denied");else if(e.matched.some((function(e){return e.meta.requiresAuth}))){if(pe.getters.isLoggedIn)return void a();a("/login")}else a()})),new n["default"]({vuetify:ge,router:_e,store:pe,render:function(e){return e(d)}}).$mount("#app")},"680e":function(e,t,a){"use strict";var n=a("99b0"),o=a.n(n);o.a},"6b03":function(e,t,a){},"98c1":function(e,t,a){},"99b0":function(e,t,a){},dde7:function(e,t,a){}});
//# sourceMappingURL=app.7b4b7dd0.js.map