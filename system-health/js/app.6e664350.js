(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/system-health/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"3d8a":function(t,e,a){},"3e7b":function(t,e,a){"use strict";a("4c5d")},"40ea":function(t,e,a){},"487f":function(t,e,a){"use strict";a("7d63")},"4c5d":function(t,e,a){},"562c":function(t,e,a){"use strict";a("40ea")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("d3b7");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",["Login"!==t.$route.name?n("nav-menu-left"):t._e(),"Login"!==t.$route.name?n("v-app-bar",{attrs:{app:"","clipped-left":"",color:"white",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"DSM Logo",contain:"",src:a("db14"),width:"150"}})],1),n("v-spacer"),n("div",{staticClass:"user-panel d-flex align-center"},[n("v-avatar",{staticClass:"user-panel__avatar",attrs:{color:"primary"}},[n("span",{staticClass:"white--text headline"},[t._v("П")])]),n("div",{staticClass:"user-panel__user-info d-flex flex-column ml-3"},[n("div",{staticClass:"user-panel__name"},[t._v("Петр Иванов")]),n("div",{staticClass:"user-panel__email"},[t._v("User@gmail.com")])])],1),n("user-menu")],1):t._e(),n("v-main",[n("v-container",[n("router-view")],1)],1)],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{staticClass:"user-menu",attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"user-menu__btn",attrs:{color:"primary",text:"",tile:""}},"v-btn",r,!1),n),[a("v-icon",[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",t._l(t.userPanelItems,(function(e,n){return a("v-list-item",{key:n,staticClass:"user-menu__item",on:{click:function(a){"logout"==e.action&&t.logout()}}},[a("v-list-item-icon",[a("v-icon",{attrs:{color:"primary"},domProps:{textContent:t._s(e.icon)}})],1),a("v-list-item-title",{staticClass:"user-menu__item-title",domProps:{textContent:t._s(e.title)}})],1)})),1)],1)},o=[],c={name:"UserMenu",data:function(){return{userPanelItems:[{icon:"mdi-cog-outline",title:"Настройки",action:null},{icon:"mdi-brightness-6",title:"Темная тема",action:null},{icon:"mdi-exit-to-app",title:"Выйти",action:"logout"}]}},methods:{logout:function(){var t=this;this.$store.dispatch("authorization/logout").then((function(){return t.$router.push({name:"Login"})})).catch((function(t){console.log(t)}))}}},l=c,u=(a("acee"),a("2877")),d=a("6544"),f=a.n(d),p=a("8336"),m=a("132d"),v=a("8860"),h=a("da13"),b=a("34c3"),g=a("5d23"),_=a("e449"),x=Object(u["a"])(l,i,o,!1,null,"41844acf",null),k=x.exports;f()(x,{VBtn:p["a"],VIcon:m["a"],VList:v["a"],VListItem:h["a"],VListItemIcon:b["a"],VListItemTitle:g["b"],VMenu:_["a"]});var y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{staticStyle:{top:"65px"},attrs:{app:"",clipped:"",permanent:"",dark:"",color:"primary",width:"300"}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"title"},[t._v(" Меню ")])],1)],1),a("v-divider"),a("v-list",{attrs:{dense:"",nav:""}},t._l(t.menuItems,(function(e,n){return a("v-list-item",{key:n,attrs:{link:""}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"item-title"},[t._v(t._s(e.title))])],1)],1)})),1)],1)},w=[],C={data:function(){return{menuItems:[{icon:"mdi-home",title:"Главная"},{icon:"mdi-folder-outline",title:"Проекты"},{icon:"mdi-chart-pie",title:"Модели"},{icon:"mdi-cog-transfer-outline",title:"Настройки"},{icon:"mdi-shield-account-variant",title:"Администрирование"}]}}},V=C,S=(a("3e7b"),a("ce7e")),j=a("f774"),I=Object(u["a"])(V,y,w,!1,null,"2da1ca66",null),O=I.exports;f()(I,{VDivider:S["a"],VIcon:m["a"],VList:v["a"],VListItem:h["a"],VListItemContent:g["a"],VListItemIcon:b["a"],VListItemTitle:g["b"],VNavigationDrawer:j["a"]});var P={components:{UserMenu:k,NavMenuLeft:O},name:"App",data:function(){return{}}},D=P,L=(a("5c0b"),a("7496")),T=a("40dc"),M=a("8212"),z=a("a523"),B=a("adda"),$=a("f6c4"),F=a("2fa4"),A=Object(u["a"])(D,r,s,!1,null,null,null),R=A.exports;f()(A,{VApp:L["a"],VAppBar:T["a"],VAvatar:M["a"],VContainer:z["a"],VImg:B["a"],VMain:$["a"],VSpacer:F["a"]});var E=a("8c4f"),U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("statistics"),a("projects-table")],1)},H=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ProjectsTable"},[a("div",{staticClass:"top-actions d-flex justify-space-between mb-5"},[a("div",{staticClass:"top-actions__newBtn"},[a("v-btn",{attrs:{color:"primary",dark:"",width:"250"}},[t._v("Создать проект")])],1),a("div",{staticClass:"top-actions__search"},[a("v-text-field",{attrs:{dense:"",height:"40","hide-details":"",placeholder:"Поиск",outlined:"","prepend-inner-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.filteredHeaders,items:t.projects,search:t.search,"sort-by":"calories","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Проекты")]),a("v-spacer"),a("v-menu",{staticClass:"table-settings",attrs:{"offset-y":"",left:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"table-settings__btn",attrs:{color:"primary",text:"",icon:""}},"v-btn",r,!1),n),[a("v-icon",[t._v("mdi-cog-outline")])],1)]}}])},[a("v-list",{attrs:{flat:""}},[a("v-list-item-group",{attrs:{multiple:""},model:{value:t.pickedSettings,callback:function(e){t.pickedSettings=e},expression:"pickedSettings"}},t._l(t.settingsItems,(function(e,n){return a("v-list-item",{key:n,staticClass:"table-settings__item",attrs:{value:e,"active-class":"transparent"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.active;return[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e)}})],1),a("v-list-item-action",[a("v-checkbox",{attrs:{"input-value":r,color:"primary"}})],1)]}}],null,!0)})})),1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(){return[a("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""}},[t._v(" mdi-delete ")])]},proxy:!0},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.getProjects}},[t._v(" Reset ")])]},proxy:!0}],null,!0)})],1)},q=[],J=(a("4de4"),a("caad"),a("2532"),a("bc3a")),N=a.n(J),Y={name:"ProjectsTable",data:function(){return{search:"",projects:[],headers:[{text:"Номер",align:"start",value:"code"},{text:"Название проекта",value:"name"},{text:"Автор проекта",value:"bimUser.username"},{text:"Параметр",value:"anonymous"},{text:"Здоровье проекта",value:"opened"},{text:"",value:"actions",sortable:!1}],settingsItems:["Номер","Название проекта","Автор проекта","Параметр","Здоровье проекта"],pickedSettings:["Номер","Название проекта","Автор проекта","Параметр","Здоровье проекта",""]}},methods:{getProjects:function(){var t=this;return new Promise((function(e,a){N.a.get("projects").then((function(a){t.projects=a.data,e(a)})).catch((function(t){console.log(t),a(t)}))}))},initProjects:function(){for(var t=0;t<=7;t++)this.projects.push({code:"0000".concat(t),name:"Project_name_".concat(t),anonymous:!0,opened:!1,bimUser:{username:"username_".concat(t)}})}},computed:{filteredHeaders:function(){var t=this;return this.headers.filter((function(e){return t.pickedSettings.includes(e.text)}))}},created:function(){this.initProjects()}},G=Y,K=(a("ddc8"),a("ac7c")),X=a("8fea"),Q=a("1800"),Z=a("1baa"),tt=a("8654"),et=a("71d9"),at=a("2a7f"),nt=Object(u["a"])(G,W,q,!1,null,"08534d0a",null),rt=nt.exports;f()(nt,{VBtn:p["a"],VCheckbox:K["a"],VDataTable:X["a"],VIcon:m["a"],VList:v["a"],VListItem:h["a"],VListItemAction:Q["a"],VListItemContent:g["a"],VListItemGroup:Z["a"],VListItemTitle:g["b"],VMenu:_["a"],VSpacer:F["a"],VTextField:tt["a"],VToolbar:et["a"],VToolbarTitle:at["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("v-row",[a("div",{staticClass:"combo-wrapper mr-4"},[a("v-combobox",{attrs:{items:t.statisticsVariants,outlined:"",dense:""},model:{value:t.combo1,callback:function(e){t.combo1=e},expression:"combo1"}})],1),a("div",{staticClass:"combo-wrapper mr-4"},[a("v-combobox",{attrs:{items:t.projectsVariants,outlined:"",dense:""},model:{value:t.combo2,callback:function(e){t.combo2=e},expression:"combo2"}})],1),a("statistics-date-picker")],1),a("v-row",{staticClass:"justify-space-between"},[a("v-col",{attrs:{cols:"7"}},[a("statistics-healthchart")],1),a("v-col",{attrs:{cols:"4"}},[a("statistics-percent-chart")],1)],1)],1)},it=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"datepicker-wrapper"},[a("v-dialog",{ref:"dialog",attrs:{"return-value":t.filterDate,persistent:"",width:"350px"},on:{"update:returnValue":function(e){t.filterDate=e},"update:return-value":function(e){t.filterDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Период","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",r,!1),n))]}}]),model:{value:t.dateFilterModal,callback:function(e){t.dateFilterModal=e},expression:"dateFilterModal"}},[a("v-date-picker",{attrs:{range:"","selected-items-text":"Период выбран",locale:"ru-Latn","first-day-of-week":"1",scrollable:"",color:"primary"},model:{value:t.filterDate,callback:function(e){t.filterDate=e},expression:"filterDate"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.dateFilterModal=!1}}},[t._v(" Отмена ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.filterDate),t.pickedFilter="date"}}},[t._v(" OK ")])],1)],1)],1)},ct=[],lt=(a("1276"),a("ac1f"),a("a15b"),{data:function(){return{filterDate:[],dateFilterModal:!1,deleteModalShow:!1}},methods:{convertDate:function(t){var e=t.split("-");return[e[2],e[1],e[0]].join(".")}},computed:{dateRangeText:function(){if(!(this.filterDate.length<2)){var t=new Date(this.filterDate[0]).setHours(0,0,0,0),e=new Date(this.filterDate[1]).setHours(0,0,0,0);return+t>=e?this.convertDate(this.filterDate[1])+" — "+this.convertDate(this.filterDate[0]):this.convertDate(this.filterDate[0])+" — "+this.convertDate(this.filterDate[1])}}}}),ut=lt,dt=a("2e4b"),ft=a("169a"),pt=Object(u["a"])(ut,ot,ct,!1,null,"6b482070",null),mt=pt.exports;f()(pt,{VBtn:p["a"],VDatePicker:dt["a"],VDialog:ft["a"],VSpacer:F["a"],VTextField:tt["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"health-chart"},[a("apexchart",{staticStyle:{width:"100%"},attrs:{type:"area",height:"350",options:t.chartOptions,series:t.series}})],1)},ht=[],bt={data:function(){return{series:[{name:"Здоровье системы",data:["10","30","20","50","60","40","90"]}],chartOptions:{chart:{redrawOnParentResize:!1,redrawOnWindowResize:!1,type:"area",height:360,width:"100%",foreColor:"black",fontFamily:"Lato, sans-serif",zoom:{enabled:!1}},colors:["#48BBC8"],dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Здоровье системы",align:"left",style:{fontSize:"16px",fontWeight:"normal",color:"black"}},labels:["Июл ‘20","Авг ‘20","Сен ‘20","Окт ‘20","Ноя ‘20","Дек ‘20","2021"],xaxis:{type:"string"},yaxis:{opposite:!1},legend:{horizontalAlign:"left"}}}}},gt=bt,_t=(a("487f"),Object(u["a"])(gt,vt,ht,!1,null,"43e7e752",null)),xt=_t.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"percent-chart d-flex align-center flex-column"},[a("div",{staticClass:"chart"},[a("apexchart",{attrs:{type:"radialBar",height:"350",options:t.chartOptions,series:t.series}})],1),a("div",{staticClass:"stats"},[a("div",{staticClass:"stats__stat d-flex align-center"},[a("v-icon",{attrs:{color:"warning"}},[t._v("mdi-alert")]),a("div",{staticClass:"text ml-3"},[t._v("Предупреждений")]),a("v-spacer"),a("div",{staticClass:"count"},[t._v("54")])],1),a("div",{staticClass:"stats__stat d-flex align-center"},[a("v-icon",{attrs:{color:"error "}},[t._v("mdi-alert-circle")]),a("div",{staticClass:"text ml-3"},[t._v("Ошибок")]),a("v-spacer"),a("div",{staticClass:"count"},[t._v("4")])],1)])])},yt=[],wt={data:function(){return{series:[90],chartOptions:{chart:{redrawOnParentResize:!1,redrawOnWindowResize:!1,height:350,type:"radialBar",toolbar:{show:!1}},plotOptions:{radialBar:{startAngle:-135,endAngle:135,hollow:{margin:0,size:"75%",background:"transparent",image:void 0,imageOffsetX:0,imageOffsetY:0,position:"front"},track:{background:"black",strokeWidth:"100%",margin:0,opacity:.2},dataLabels:{show:!0,name:{offsetY:-30,show:!0,color:"black",fontSize:"14px"},value:{formatter:function(t){return parseInt(t)+"%"},color:"black",fontSize:"68px",show:!0}}}},fill:{colors:["#48BBC8"],opacity:1,type:"solid"},stroke:{lineCap:"round"},labels:["Здоровье системы"]}}}},Ct=wt,Vt=(a("562c"),Object(u["a"])(Ct,kt,yt,!1,null,"21c8ef47",null)),St=Vt.exports;f()(Vt,{VIcon:m["a"],VSpacer:F["a"]});var jt={components:{StatisticsHealthchart:xt,StatisticsDatePicker:mt,StatisticsPercentChart:St},name:"Statistics",data:function(){return{combo1:"Здоровье системы",statisticsVariants:["Здоровье системы","Предупреждения","Ошибки","Показатель А","Показатель Б"],combo2:"Здоровье системы",projectsVariants:["Здоровье системы","Предупреждения","Ошибки","Показатель А","Показатель Б"]}}},It=jt,Ot=(a("a205"),a("62ad")),Pt=a("2b5d"),Dt=a("0fd9"),Lt=Object(u["a"])(It,st,it,!1,null,"1563f085",null),Tt=Lt.exports;f()(Lt,{VCol:Ot["a"],VCombobox:Pt["a"],VRow:Dt["a"]});var Mt={name:"Main",components:{ProjectsTable:rt,Statistics:Tt}},zt=Mt,Bt=(a("a1c2"),Object(u["a"])(zt,U,H,!1,null,"7801eed3",null)),$t=Bt.exports;n["a"].use(E["a"]);var Ft=[{path:"/",name:"Main",component:$t}],At=new E["a"]({mode:"history",base:"/system-health/",routes:Ft}),Rt=At,Et=a("2f62"),Ut=function(){return{authStatus:"",token:localStorage.getItem("token")||"",refreshToken:localStorage.getItem("refreshToken")||""}},Ht={auth_request:function(t){t.authStatus="loading"},auth_success:function(t,e){t.authStatus="success",t.token=e.token,t.refreshToken=e.refreshToken},auth_error:function(t){t.authStatus="error"},logout:function(t){t.authStatus="",t.token="",t.refreshToken=""}},Wt={login:function(t,e){var a=t.commit;return new Promise((function(t,n){a("auth_request"),N.a.post("/auth/authenticate",e).then((function(e){var n=e.data.accessToken,r=e.data.refreshToken;localStorage.setItem("token",n),localStorage.setItem("refreshToken",r),a("auth_success",{token:n,refreshToken:r}),t(e)})).catch((function(t){a("auth_error"),localStorage.removeItem("token"),n(t)}))}))},logout:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("token"),delete N.a.defaults.headers.common["Authorization"],t()}))}},qt={isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.authStatus}},Jt={namespaced:!0,state:Ut,mutations:Ht,actions:Wt,getters:qt};n["a"].use(Et["a"]);var Nt=new Et["a"].Store({modules:{authorization:Jt}}),Yt=a("f309");n["a"].use(Yt["a"]);var Gt=new Yt["a"]({theme:{themes:{light:{primary:"#48BBC8",secondary:"#F3F8FD",error:"#F44336",success:"#27AE60",warning:"#F2994A"}}}}),Kt=a("1321"),Xt=a.n(Kt);n["a"].use(Xt.a),n["a"].component("apexchart",Xt.a),n["a"].config.productionTip=!1,N.a.defaults.baseURL="http://dsm.ds.do:8080/rest/",N.a.interceptors.request.use((function(t){var e=localStorage.getItem("token");return t.headers.Authorization=e?"Bearer "+e:null,t}),(function(t){return Promise.reject(t)})),N.a.interceptors.response.use((function(t){return 401!==t.status&&403!==t.status||(Nt.dispatch("authorization/logout"),Rt.push({name:"Login"})),t}),(function(t){return t.response&&t.response.data?(401!==t.response.status&&403!==t.response.status||(Nt.dispatch("authorization/logout"),Rt.push({name:"Login"})),Promise.reject(t.response.data)):Promise.reject(t.message)})),new n["a"]({router:Rt,store:Nt,vuetify:Gt,render:function(t){return t(R)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("9c0c")},"693f":function(t,e,a){},"7d63":function(t,e,a){},8493:function(t,e,a){},"9c0c":function(t,e,a){},a1c2:function(t,e,a){"use strict";a("bb5b")},a205:function(t,e,a){"use strict";a("693f")},acee:function(t,e,a){"use strict";a("8493")},bb5b:function(t,e,a){},db14:function(t,e,a){t.exports=a.p+"img/logo.cc2b4d38.svg"},ddc8:function(t,e,a){"use strict";a("3d8a")}});
//# sourceMappingURL=app.6e664350.js.map